<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Llist</title>
    <style>
      ul { list-style: none; }
      ul li {
        font-family: Helvetica, sans-serif;
        font-size: 30px;
        float: left;
        border: solid 1px #ccc;
        padding: 0.7em;
        margin: 0.2em;
      }

    </style>
  </head>
  <body>

    <button onClick="modify()">Click me</button>
    <div id="list"></div>

    <!-- Placed at the end of the document so the pages load faster -->
    <script src="bower_components/d3/d3.min.js" charset="utf-8"></script>
    <script src="/src/llist.js" charset="utf-8"></script>
    <script>
      function key(d) { return d.place; }
      function sortList(a, b) {
        if (a.place > b.place) return 1
        if (a.place < b.place) return -1
        return 0
      }
      var theList = d3.llist()
                      .updateLi(function(selection) {
                        selection.text(function(d) { return d.place /*+ ' ' + d.price + 'â‚¬'*/ })
                      })
                      .key(function(d) { return d.place })

      var example_data = [
        { place: "Apple", price: 29.32 },
        { place: "Watermelon", price: 9.45 },
        { place: "Banana", price: 51.63 },
        { place: "Grape", price: 41.75 },
        { place: "Peach", price: 12.10 },
        { place: "Kiwi", price: 73 }
      ].sort(sortList)
      d3.select('#list').datum(example_data).call(theList)
      
      function modify() {
        console.log("Auch!")
        var example_data2 = [
          { place: "Avocado", price: 12.10 },
          { place: "Banana", price: 26.10 },
          { place: "Grape", price: 41.75 },
          { place: "Kiwi", price: 73 },
          { place: "Pine", price: 45.5 },
          { place: "Strawberry", price: 65.4 }
        ].sort(sortList)
        d3.select('#list')
          .datum(example_data2)
          .call(theList)
      }

      window.setTimeout(modify, 3000)
      </script>
  </body>
</html>